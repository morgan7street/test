<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Options+</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Material+Symbols+Outlined" rel="stylesheet">
  <style>
    body {font-family:'Inter', sans-serif;}
  </style>
</head>
<body class="bg-light">
<div class="container py-5 mb-5">
  <h1 class="mb-4">Options+</h1>
  <div class="mb-4">
    <h2 class="h5">Minuterie hydrique</h2>
    <p id="water-timer" class="fs-4">--:--</p>
    <button id="start-water" class="btn btn-primary me-2">Démarrer</button>
    <button id="stop-water" class="btn btn-secondary">Arrêter</button>
  </div>
  <div class="mb-4">
    <h2 class="h5">Minuterie mouvement</h2>
    <p id="move-timer" class="fs-4">--:--</p>
    <button id="start-move" class="btn btn-primary me-2">Démarrer</button>
    <button id="stop-move" class="btn btn-secondary">Arrêter</button>
  </div>
</div>

<nav class="navbar fixed-bottom bg-white border-top py-2">
  <div class="container d-flex justify-content-around">
    <a href="{{ url_for('index') }}" class="text-center text-decoration-none text-body">
      <span class="material-symbols-outlined d-block">home</span>
      <small>Accueil</small>
    </a>
    <a href="{{ url_for('add') }}" class="text-center text-decoration-none text-body">
      <span class="material-symbols-outlined d-block">add</span>
      <small>Ajouter</small>
    </a>
    <a href="{{ url_for('settings') }}" class="text-center text-decoration-none text-body">
      <span class="material-symbols-outlined d-block">settings</span>
      <small>Paramètres</small>
    </a>
    <a href="{{ url_for('options') }}" class="text-center text-decoration-none text-body">
      <span class="material-symbols-outlined d-block">more_horiz</span>
      <small>Options+</small>
    </a>
  </div>
</nav>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
function createTimer(display, intervalMinutes) {
  let timerId = null;
  let remaining = intervalMinutes * 60;
  function update() {
    const minutes = String(Math.floor(remaining / 60)).padStart(2, '0');
    const seconds = String(remaining % 60).padStart(2, '0');
    display.textContent = `${minutes}:${seconds}`;
    if (remaining === 0) {
      clearInterval(timerId);
      alert('Temps écoulé !');
    }
    remaining--; 
  }
  return {
    start() {
      clearInterval(timerId);
      remaining = intervalMinutes * 60;
      update();
      timerId = setInterval(update, 1000);
    },
    stop() { clearInterval(timerId); display.textContent = '--:--'; }
  };
}
const waterTimer = createTimer(document.getElementById('water-timer'), 30);
const moveTimer = createTimer(document.getElementById('move-timer'), 60);
document.getElementById('start-water').onclick = () => waterTimer.start();
document.getElementById('stop-water').onclick = () => waterTimer.stop();
document.getElementById('start-move').onclick = () => moveTimer.start();
document.getElementById('stop-move').onclick = () => moveTimer.stop();
</script>
</body>
</html>
